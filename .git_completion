# Override 
alias g.c='git add . -A && gc'

# Fonction de complÃ©tion personnalisÃ©e pour g.c
_gc_completion() {
    local cur="${COMP_WORDS[COMP_CWORD]}"
    local prev="${COMP_WORDS[COMP_CWORD-1]}"
    
    # Reconstruit la ligne complÃ¨te (sans g.c)
    local full_line="${COMP_WORDS[@]:1}"
    full_line="${full_line% *}"  # EnlÃ¨ve le dernier mot incomplet
    
    # Liste de suggestions de messages de commit avec emojis (tri alphabÃ©tique sur le texte)
    local suggestions=(
        "ğŸ“¦ build: "
        "ğŸ”§ config: "
        "ğŸ’š ci: "
        "ğŸ§± data: "
        "ğŸ“ docs: "
        "âœ¨ feature: "
        "ğŸ› fix: "
        "ğŸ¨ improve: "
        "ğŸ‰ init: "
        "âš¡ perf: "
        "ğŸ”¥ remove: "
        "â™»ï¸ refactor: "
        "âª revert: "
        "ğŸ”’ security: "
        "ğŸ’„ style: "
        "âœï¸ typo: "
        "âœ… test: "
        "ğŸš€ deploy: "
        "â¬†ï¸ update: "
        "ğŸš§ wip: "
    )
    
    # Si on est au premier mot (juste aprÃ¨s g.c)
    if [[ $COMP_CWORD -eq 1 ]]; then
        local matches=()
        for suggestion in "${suggestions[@]}"; do
            local text_only="${suggestion#* }"
            if [[ "$text_only" == "$cur"* ]]; then
                matches+=("$suggestion")
            fi
        done
        COMPREPLY=("\"${matches[@]}")
    # Si on a dÃ©jÃ  commencÃ© Ã  taper (plusieurs mots)
    else
        # Reconstruit tout ce qui a Ã©tÃ© tapÃ© jusqu'ici
        local typed=""
        for ((i=1; i<COMP_CWORD; i++)); do
            typed+="${COMP_WORDS[i]} "
        done
        typed+="$cur"
        
        local matches=()
        for suggestion in "${suggestions[@]}"; do
            if [[ "$suggestion" == "$typed"* ]]; then
                # Retourne seulement la partie manquante
                matches+=("${suggestion}")
            fi
        done
        
        # Si aucune correspondance exacte, dÃ©sactive la complÃ©tion
        if [[ ${#matches[@]} -eq 0 ]]; then
            COMPREPLY=()
        else
            COMPREPLY=("${matches[@]}")
        fi
    fi
}

# Associe la fonction de complÃ©tion Ã  votre alias
complete -o nospace -F _gc_completion g.c
